(function(){"use strict";var t={2340:function(t,n,e){var o=e(9242),a=e(3396);const r={id:"body"};function s(t,n,e,o,s,i){const c=(0,a.up)("map-frame"),d=(0,a.up)("location-frame");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(c),(0,a.Wm)(d)])}const i=t=>((0,a.dD)("data-v-48d1dec1"),t=t(),(0,a.Cn)(),t),c={class:"map"},d={class:"wrapper"},l=(0,a.Uk)(" Карта "),u=i((()=>(0,a._)("div",{id:"mapContainer"},null,-1)));function p(t,n,e,o,r,s){const i=(0,a.up)("apple-card");return(0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("div",d,[(0,a.Wm)(i,null,{cardName:(0,a.w5)((()=>[l])),content:(0,a.w5)((()=>[u])),_:1})])])}var f=e(3153),v=e.n(f),m=e(6265),g=e.n(m);const h="https://nominatim.openstreetmap.org/reverse",w="jsonv2";function _(){return new Promise(((t,n)=>{navigator.geolocation.getCurrentPosition((({coords:n})=>t(n)),(t=>n(t)))}))}async function b({latitude:t,longitude:n}){const{data:e}=await g().get(h,{params:{format:w,lat:t,lon:n}});return e.address}async function P(){const t=await _();return b(t)}const k={class:"apple card"},y={class:"tools"},O=(0,a.uE)('<div class="circle" data-v-5f8c8187><span class="red box" data-v-5f8c8187></span></div><div class="circle" data-v-5f8c8187><span class="yellow box" data-v-5f8c8187></span></div><div class="circle" data-v-5f8c8187><span class="green box" data-v-5f8c8187></span></div>',3),C={class:"cardName"},N={class:"content"};function x(t,n,e,o,r,s){return(0,a.wg)(),(0,a.iD)("div",k,[(0,a._)("div",y,[O,(0,a._)("div",C,[(0,a.WI)(t.$slots,"cardName",{},void 0,!0)])]),(0,a._)("div",N,[(0,a.WI)(t.$slots,"content",{},void 0,!0)])])}var A={name:"AppleCard"},z=e(89);const S=(0,z.Z)(A,[["render",x],["__scopeId","data-v-5f8c8187"]]);var j=S,L={name:"MapFrame",components:{AppleCard:j},data(){return{map:{},center:[59.926503,30.338712]}},methods:{initMap:function(){const t=v().map("mapContainer").setView(this.center,13);this.map=t,v().tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.map),this.map.on("click",this.mapClick)},mapClick:function(t){const n=v().icon({iconUrl:e(8529),iconSize:28}),o={latitude:t.latlng.lat,longitude:t.latlng.lng};b(o).then((t=>{this.$store.dispatch("addNewPoint",t)})),v().marker(t.latlng,{icon:n}).addTo(this.map)}},mounted(){this.initMap()}};const W=(0,z.Z)(L,[["render",p],["__scopeId","data-v-48d1dec1"]]);var D=W,M=e(7139);const U={class:"location"},F={class:"wrapper"},E={class:"home point"},I=(0,a.Uk)(" Домашний адресс "),T={class:"user point"},Z=(0,a.Uk)(" Последняя точка "),$=(0,a.Uk)(" Все точки ");function q(t,n,e,o,r,s){const i=(0,a.up)("apple-card");return(0,a.wg)(),(0,a.iD)("div",U,[(0,a._)("div",F,[(0,a._)("div",E,[(0,a.Wm)(i,{class:"card"},{cardName:(0,a.w5)((()=>[I])),content:(0,a.w5)((()=>[(0,a.Uk)((0,M.zw)(r.address.road)+" "+(0,M.zw)(r.address.house_number),1)])),_:1}),(0,a._)("button",{onClick:n[0]||(n[0]=(...t)=>s.fetchAddress&&s.fetchAddress(...t))},"Где Я?")]),(0,a._)("div",T,[(0,a.Wm)(i,{class:"card"},{cardName:(0,a.w5)((()=>[Z])),content:(0,a.w5)((()=>[(0,a.Uk)((0,M.zw)(t.lastPoint.road)+" "+(0,M.zw)(t.lastPoint.house_number),1)])),_:1}),(0,a.Wm)(i,{class:"card"},{cardName:(0,a.w5)((()=>[$])),content:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.listOfPoints,(n=>((0,a.wg)(),(0,a.iD)("p",{key:t.listOfPoints.indexOf(n)},(0,M.zw)(n.road)+" "+(0,M.zw)(n.house_number),1)))),128))])),_:1})])])])}var B=e(65),H={components:{AppleCard:j},data(){return{address:{},error:null,geolocationSupported:"geolocation"in navigator,loading:!1}},computed:{...(0,B.Se)({lastPoint:"getLastPoint",listOfPoints:"getListOfPoints"})},methods:{async fetchAddress(){try{this.setLoadingState(),this.address=await P(),this.loading=!1}catch(t){this.setErrorState(t)}},setErrorState(t){this.error=t,this.loading=!1},setLoadingState(){this.error=null,this.loading=!0}}};const K=(0,z.Z)(H,[["render",q],["__scopeId","data-v-6399c24c"]]);var V=K,Y={name:"App",components:{LocationFrame:V,MapFrame:D}};const G=(0,z.Z)(Y,[["render",s]]);var J=G,Q=e(9907);(0,Q.z)("/pwa_osm_test/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});const R=(0,B.MT)({actions:{addNewPoint(t,n){t.commit("addNewPoint",n)}},mutations:{addNewPoint(t,n){t.lastPoint=n,t.listOfPoints.push(n)}},state:{lastPoint:{},listOfPoints:[]},getters:{getLastPoint:t=>t.lastPoint,getListOfPoints:t=>t.listOfPoints}});var X=R;const tt=(0,o.ri)(J);tt.use(X),tt.mount("#app")},8529:function(t,n,e){t.exports=e.p+"img/location.c11e8eee.svg"}},n={};function e(o){var a=n[o];if(void 0!==a)return a.exports;var r=n[o]={exports:{}};return t[o].call(r.exports,r,r.exports,e),r.exports}e.m=t,function(){var t=[];e.O=function(n,o,a,r){if(!o){var s=1/0;for(l=0;l<t.length;l++){o=t[l][0],a=t[l][1],r=t[l][2];for(var i=!0,c=0;c<o.length;c++)(!1&r||s>=r)&&Object.keys(e.O).every((function(t){return e.O[t](o[c])}))?o.splice(c--,1):(i=!1,r<s&&(s=r));if(i){t.splice(l--,1);var d=a();void 0!==d&&(n=d)}}return n}r=r||0;for(var l=t.length;l>0&&t[l-1][2]>r;l--)t[l]=t[l-1];t[l]=[o,a,r]}}(),function(){e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,{a:n}),n}}(),function(){e.d=function(t,n){for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(),function(){e.p="/pwa_osm_test/"}(),function(){var t={143:0};e.O.j=function(n){return 0===t[n]};var n=function(n,o){var a,r,s=o[0],i=o[1],c=o[2],d=0;if(s.some((function(n){return 0!==t[n]}))){for(a in i)e.o(i,a)&&(e.m[a]=i[a]);if(c)var l=c(e)}for(n&&n(o);d<s.length;d++)r=s[d],e.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return e.O(l)},o=self["webpackChunkpwa_test"]=self["webpackChunkpwa_test"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=e.O(void 0,[998],(function(){return e(2340)}));o=e.O(o)})();
//# sourceMappingURL=app.81803b96.js.map